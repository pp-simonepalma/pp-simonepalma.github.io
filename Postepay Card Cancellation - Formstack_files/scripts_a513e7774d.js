Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var r=0;if(0<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!==r&&r!=1/0&&r!=-1/0&&(r=(0<r||-1)*Math.floor(Math.abs(r)))),i<=r)return-1;for(var a=0<=r?r:Math.max(i-Math.abs(r),0);a<i;a++)if(a in t&&t[a]===e)return a;return-1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,i=Object(this),r=i.length>>>0,a=0;if(2==arguments.length)t=arguments[1];else{for(;a<r&&!(a in i);)a++;if(r<=a)throw new TypeError("Reduce of empty array with no initial value");t=i[a++]}for(;a<r;a++)a in i&&(t=e(t,i[a],a,i));return t}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),r=1;r<arguments.length;r++){var a=arguments[r];if(null!=a)for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(i[n]=a[n])}return i},writable:!0,configurable:!0}),Number.prototype.toFixed=function(e){e=20<(e=e||0)?20:e;var t=Math.pow(10,e),i=(Math.round(Math.round(this*t*100)/100)/t).toString();return 0<=i.indexOf(".")?i+t.toString().substr(i.length-i.indexOf(".")):0===e?i:i+"."+t.toString().substr(1)},jQuery.noConflict(),function(window,$){"use strict";var console=window.console||{log:function(){},warn:function(){},error:function(){}},Formstack=window.Formstack||{},Hs;Formstack.Form=function(e,t){this.id=e,this.baseUrl=t,this.currentPage=1,this.pages=$("div.fsPage").length,this.logicFields=[],this.checks=[],this.hasHtml5Validation="object"==typeof document.createElement("input").validity,this.customSubmissionHandler=!1,this.jsonp=!1,this.calculations=[],this.calcFields=[],this.dateCalculations=[],this.dateCalcFields=[],this.validate=!0,this.forLogic=!1,this.failedContainers=[],this.onChange=!1,this.touched=!1,this.form=jQuery("#fsForm"+this.id),this.skipPageValidation=jQuery("#fsSkipPageValidation").val(),this.skipValidation=!1,this.initializing=!1,this.fireLogicEvents=!1,this.bottleneckFieldId=null,this.viewparam=jQuery("#viewparam").val(),this.lastActiveCalloutId=null,this.disableNavigation=!1,this.isWorkflowForm=!1,this.workflowSections={},this.workflowFields={},this.isSaveResumeEnabled=!!jQuery("#isSaveResumeEnabled").length,1<this.pages&&($("#fsNextButton"+this.id).click($.proxy(this.nextPage,this)),$("#fsPreviousButton"+this.id).click($.proxy(this.previousPage,this))),this.hasHtml5Validation||(document.getElementById("fsForm"+this.id).novalidate=!1),this.integrations={},this.plugins={},$("#fsSendStepBackButton"+this.id).on("click",$.proxy(this.onSendBack,this))},Formstack.Form.prototype.onSendBack=function(){var e=$("#fsSendStepBackButton"+this.id),t=e.data("message-prompt"),i=e.data("title-prompt"),r={confirm:e.data("confirm-prompt"),goodies:["textarea"],message:t,title:i};$(".fs-form-dialog__textarea").attr("aria-label",t);var a=this;this.launchDialog(r,function(e){var t=e.textarea;null!=t&&($("#fsSendStepBackComment"+a.id).attr("value",t),$("#fsIsSendStepBack"+a.id).attr("value","1"),a.validate=!1,a.form.submit())})},Formstack.Form.prototype.resetSubmitButton=function(){var e=document.getElementById("fsSubmitButton"+this.id),t=document.getElementById("submitButtonText");e&&t&&(e.value=t.innerHTML)},Formstack.Form.prototype.createInput=function(e,t,i,r){var a=document.getElementById("fsForm"+this.id),n=document.createElement("input");return n.setAttribute("name",t),n.setAttribute("id",e),n.setAttribute("type",i||"hidden"),n.value=r||"",a.appendChild(n),n},Formstack.Form.prototype.getFieldGroup=function(e){var t=$(".fsField"),i=[],r=new RegExp("^field"+e+"($|_|-)");return t.each(function(e,t){r.test(t.id)&&i.push(t)}),i},Formstack.Form.prototype.isLastPage=function(e){if(1==this.pages)return!0;for(var t=1,i=1;i<=this.pages;i++)this.pageIsVisible(i)&&(t=i);return e==t},Formstack.Form.prototype.nextPage=function(){if(!(this.disableNavigation||this.currentPage+1>this.pages)){if(!this.skipPageValidation)if(!this.checkPage(this.currentPage))return void this.form.trigger("form:validation-error");document.getElementById("fsPage"+this.id+"-"+this.currentPage);for(var e=1;!this.pageIsVisible(this.currentPage+e)&&this.currentPage+e<this.pages;)e++;var t=this.currentPage+e;this.changePage(this.currentPage,t)}},Formstack.Form.prototype.previousPage=function(e){if(!this.disableNavigation&&this.currentPage-1!=0){document.getElementById("fsPage"+this.id+"-"+this.currentPage);for(var t=1;!this.pageIsVisible(this.currentPage-t)&&1<this.currentPage-t;)t++;var i=this.currentPage-t;this.changePage(this.currentPage,i)}},Formstack.Form.prototype.checkPage=function(e){var t,i;if(!this.validate)return!0;var r=document.getElementById("fsPage"+this.id+"-"+e);t=$(r).find("input:not([data-skip-validation]), select.fsFormatMaxDate, textarea");var a=0;for(this.failedContainers=[],i=0;i<t.length;i++)this.checkFormat(t[i])&&a++;var n=t.length===a;if(!n)return!1;var s=!0;return $(r).find(".fsFieldCell").each(function(e,t){s=this._applyRequiredFieldValidation(t)&&s}.bind(this)),n&&s?$("#fsError"+this.id).remove():this.focusFirstError(),n&&s},Formstack.Form.prototype.initLogic=function(){for(var e=0;e<this.logicFields.length;e++)for(var t=this.getFields(this.logicFields[e],!0),i=0;i<t.length;i++){t[i].type.toLowerCase();$(t[i]).bind("change",$.proxy(this.checkLogic,this)),this.checkLogic(t[i])}},Formstack.Form.prototype.initCalculations=function(){var e;for(e=0;e<this.calcFields.length;e++){for(var t=this.calcFields[e].match(/(\d+)/)[1],i=this.getFields(t),r=0;r<i.length;r++){var a=i[r];a.type.toLowerCase();$(a).bind("change",$.proxy(this.updateCalculations,this))}var n=document.getElementById("field"+t+"_othervalue");n&&$(n).bind("change",$.proxy(function(e){var t=null,i="",r="";if(e){var a=e.currentTarget.id.indexOf("_othervalue");r=-1!=a?(i=e.currentTarget.id.substring(0,a),e.currentTarget.id.substring(5,a)):e.currentTarget.id.substring(5)}n=document.getElementById(i+"_othervalue"),(t=document.getElementById(i+"_other"))&&(t.checked=""!==n.value),this.updateCalculations(r),this.checkLogic(r)},this))}for(e=0;e<this.calculations.length;e++)this.evalCalculation(this.calculations[e])},Formstack.Form.prototype.initDateCalculations=function(){for(var e=0,t=this.dateCalcFields.length;e<t;e++)for(var i=this.dateCalcFields[e].match(/(\d+)/)[1],r=this.getFields(i,!0),a=0,n=r.length;a<n;a++)$(r[a]).bind("change",$.proxy(this.updateDateCalculations,this));for(e=0;e<this.dateCalculations.length;e++)this.evalDateCalculation(this.dateCalculations[e])},Formstack.Form.prototype.initFields=function(){$(".fsField.fsRequired").bind("change",$.proxy(function(e){this.checkRequired(e.target,!0)},this)),$(".fsField").bind("change",$.proxy(function(e){this.checkFormat(e.target,!0)},this)),$(".fsCheckAllOption").bind("change",$.proxy(function(e){Formstack.Util.checkAll(e)},this)),$(".fsField.fsFormatNumber.fsRequired").bind("blur",$.proxy(function(e){this.checkRequired(e.target,!0)},this)),$(".fsField.fsFormatNumber").bind("blur",$.proxy(function(e){this.checkFormat(e.target,!0)},this)),$('.fsRowBody.fsReadOnly[fs-field-type="datetime"]').find("select").bind("focus mousedown",$.proxy(function(e){e.stopPropagation(),e.preventDefault(),e.currentTarget.blur()},this)),$("input.fsOtherField").change(function(e){var t=$(this).attr("id").split("_")[0],i=$("#"+t+"_other");i.prop("checked",""!==$(this).val()),i.trigger("change")}),this.createInput("fsUserAgent","fsUserAgent","hidden",navigator.userAgent),$(":not(input:radio, input:checkbox).fsField, .fsReactInteractiveInput").focus($.proxy(this.focus,this)),$(":not(input:radio, input:checkbox).fsField, .fsReactInteractiveInput").blur($.proxy(this.focus,this)),$("input:radio.fsField, input:checkbox.fsField").click($.proxy(this.focus,this)),$("div.fsCallout").each(function(e){$(this).hide()})},Formstack.Form.prototype.initMatrixes=function(){$("table.fsMatrixOnePerColumn input").each($.proxy(function(e,t){var i=t.type.toLowerCase();"radio"!=i&&"checkbox"!=i||$(t).click($.proxy(function(e){this.checkMatrixOnePerColumn(t.id)},this))},this))},Formstack.Form.prototype.getSignatureImageData=function(e){var t=this.getFieldId(e),i=$("#field"+t).val(),r=i&&i.substr(0,10);return i&&"data:image"===r?i:null},Formstack.Form.prototype.initSignatures=function(){$(".fsSignature").each($.proxy(function(e,t){var i=this.getFieldId(t.id);$(t).jSignature({sizeRatio:this.getJSignatureRatio()}),$(t).bind("change",function(e){0<$(e.target).jSignature("getSettings").data.length&&$("#field"+i).val($(e.target).jSignature("getData"))}),$("#signatureClear"+i).bind("click",function(e){$(t).jSignature("reset"),$("#field"+i).val()});var r=this.getSignatureImageData(t.id);this.isSaveResumeEnabled&&r&&$(t).jSignature("setData",r)},this))},Formstack.Form.prototype.isSurvey=function(){return document.body.classList.contains("survey-mode")},Formstack.Form.prototype.isLandscape=function(){return document.body.clientWidth/document.body.clientHeight<1},Formstack.Form.prototype.getJSignatureRatio=function(){if(!this.isSurvey())return 4;var e=this.isSurvey()?3:4;return this.isLandscape()?1:e},Formstack.Form.prototype.initTextAreas=function(){$("textarea.fsTextAreaMaxLength").each($.proxy(function(e,t){var i=t.id.match(/(\d+)/)[1],r=(t=$(t),$("#fsCounter"+i)),a=t.attr("maxlength");0<a&&(t.keyup($.proxy(function(e){this.textareaCharLimiter(i,a)},this)),t.data("x",t.outerWidth()),t.data("y",t.outerHeight()),t.mouseup($.proxy(function(e){var t=jQuery(e.target);t.outerWidth()===t.data("x")&&t.outerHeight()===t.data("y")||r.width(t.outerWidth()),t.data("x",t.outerWidth()),t.data("y",t.outerHeight())})),r.width(t.outerWidth()),r.text(a+"/"+a),r.show())},this))},Formstack.Form.prototype.getCalendarFormat=function(e){var t="mm/dd/yy";if(!e)return t;var i=document.getElementById("field"+e+"Format");if(!i)return t;switch(i.value){case"DMY":return"dd/mm/yy";case"YMD":return"yy/mm/dd";case"MY":return"mm/yy/dd";default:return t}},Formstack.Form.prototype.initCalendars=function(){for(var l={"01":31,"02":28,"03":31,"04":30,"05":31,"06":30,"07":31,"08":31,"09":30,10:31,11:30,12:31,Jan:31,January:31,Feb:28,February:28,Mar:31,March:31,Apr:30,April:30,May:31,Jun:30,June:30,Jul:31,July:31,Aug:31,August:31,Sep:30,September:30,Oct:31,October:31,Nov:30,November:30,Dec:31,December:31},e=$("div .fsCalendar").get(),t=0;t<e.length;t++){var i=e[t],r=i.id.match(/(\d+)/);r=r[1];var a=document.getElementById("field"+r+"Y").options,n=parseInt(a[1].value,10),s=parseInt(a[a.length-1].value,10),o=(new Date).getFullYear();n<100&&(n+=o-2e3<n?1900:2e3),s<100&&(s+=2e3);var d=this.getCalendarFormat(r),c=$("#"+i.id+"Link");if(!$.datepicker)return void c.css("display","none");var u=document.getElementById("field"+r+"MaxDate"),m=u?new Date(u.value):new Date(s,11,31);c.datepicker({minDate:new Date(n,0,1),maxDate:m,buttonImage:$("#fsCalendar"+r+"ImageUrl").html(),buttonImageOnly:!0,beforeShow:this.calendarShow,onSelect:this.calendarSelect,showOn:"both",dateFormat:d,buttonText:"Select Date"}),$("#field"+r+"M").change(function(){var e=$(this).attr("id").replace(/\D/g,""),t=$("#field"+e+"D"),i=$("#field"+e+"Y").find("option:selected").val(),r=$(this).find("option:selected").val(),a=l[r];"Feb"!=r&&"February"!=r&&"02"!=r||""==i||(i%4==0&&i%100!=0||i%400==0)&&(a=29);for(var n=29;n<=31;n++){var s=t.find("option[value='"+n+"']");n<=a?s.show():s.hide()}var o=t.find("option:selected");o.val()>a&&o.attr("selected",!1)}),$("#field"+r+"Y").change(function(){var e=$(this).attr("id").replace(/\D/g,""),t=$(this).find("option:selected").val(),i=$("#field"+e+"D"),r=$("#field"+e+"M");if(r.find("option:selected")){var a=r.find("option:selected").val();if("Feb"==a||"February"==a||"02"==a){var n=i.find("option[value='29']");t%4==0&&t%100!=0||t%400==0?n.show():(n.attr("selected",!1),n.hide())}}})}$("#fsForm"+this.id+" .ui-datepicker-trigger").attr("aria-hidden",!0)},Formstack.Form.prototype.initAutocompletes=function(){$(".fsAutocomplete").each($.proxy(function(e,t){var i=t.id.match(/(\d+)/)[1],r=document.getElementById("field"+i),a=document.getElementById("field"+i+"_options").value;$(r).autocomplete({source:a.split("|")})}))},Formstack.Form.prototype.initSliders=function(){$(".fsSliderDiv").each($.proxy(function(e,t){var i,r=t.id.match(/(\d+)/)[1],a=document.getElementById("field"+r);if(i=this.getNumberProperties(a),!isNaN(i.min)&&!isNaN(i.max)){var n=document.getElementById(a.id+"-slidervalue"),s=""!==a.val?parseFloat(a.value):i.min;isNaN(s)&&(s=i.min);var o=document.querySelector('[href*="default-v4.css"]');$(t).slider({start:$.proxy(this.focus,this),stop:$.proxy(this.focus,this),min:i.min,max:i.max,value:s,form:this,num:i,field:a,slideval:n,range:!!o&&"min"}),isNaN(i.decimals)||(s=s.toFixed(i.decimals)),a.value=s,n.innerHTML=Formstack.Util.formatNumber(i,s),$(t).bind("slide",function(e,t){var i=$(this).slider("option","form"),r=$(this).slider("option","num"),a=$(this).slider("option","field"),n=$(this).slider("option","slideval");r=i.getNumberProperties(a);var s=t.value;a.value=s,n.innerHTML=Formstack.Util.formatNumber(r,s);var o=a.id.match(/(\d+)/)[1];0<=i.calcFields.indexOf(o)&&i.updateCalculations(o),0<=i.dateCalcFields.indexOf(o)&&i.updateDateCalculations(o),0<=i.logicFields.indexOf(o)&&i.checkLogic(o)})}},this))},Formstack.Form.prototype.initSaveResume=function(){$(".fsSaveIncomplete").click($.proxy(this.saveIncomplete,this))},Formstack.Form.prototype.initPayments=function(){if(document.querySelector('[fs-field-type="creditcard"]')){this.paymentIntegrations={};var e=document.getElementById("fsForm"+this.id).getAttribute("action"),t=e.substring(0,e.lastIndexOf("/"))+"/integration.php";$.ajax({url:t,dataType:"json",data:{f:this.id,i:"payment",v:document.querySelector('[name="viewkey"]').value},success:function(e){for(var t in e.data)if(e.data.hasOwnProperty(t)){var i="init"+t.charAt(0).toUpperCase()+t.slice(1);"function"==typeof this[i]&&this[i](e.data[t])}}.bind(this)})}},Formstack.Form.prototype.initPaypalpro=function(e){e.cardinal_cruise&&this.initCardinalCruise(e.id,e.cardinal_cruise)},Formstack.Form.prototype.initCardinalCruise=function(r,e){var a=document.getElementById("field"+e.field_map.card+"-card"),n=document.getElementById("field"+e.field_map.card+"-cardexp");if(a){var t=e.field_map.quantity.replace("-quantity",""),s=document.getElementById("field"+t);if(s){var i,o;jQuery.getScript(e.songbirdJsUrl,function(){Cardinal.configure({logging:{level:"off"}})}),o=(i=e.field_map.unit_price.match("^([0-9]+)-unit_price$"))?function(){var e=i[1];return document.getElementById("field"+e).getAttribute("data-product-price")}:function(){return document.getElementById("field"+e.field_map.unit_price).value};var l=jQuery(a).parents("form"),d=this;l.submit(function(e){if(l.data("skip-cardinal-cruise"))return!0;var t=s.value*o()*100;if(0<t&&""!=a.val){e.preventDefault();var i="/admin/cardinal_cruise/"+r;jQuery.get(i,{totalPrice:t},function(i){Cardinal.on("payments.setupComplete",function(){Cardinal.trigger("bin.process",a.value.replace(/ /g,"")).then(function(e){var t={OrderDetails:{OrderNumber:i.orderNumber},Consumer:{Account:{AccountNumber:a.value.replace(/ /g,""),ExpirationMonth:n.value.split(" / ")[0],ExpirationYear:"20"+n.value.split(" / ")[1]}}};Cardinal.start("cca",t)})}),Cardinal.on("payments.validated",function(e,t){switch(e.ActionCode){case"SUCCESS":case"NOACTION":var i=jQuery("<input>",{type:"hidden",value:t,name:"cardinal_cruise_jwt"});l.append(i),l.data("skip-cardinal-cruise",!0),l.submit();break;default:d.showError("Payment authentication failed. Please submit the form again.",!0);var r=$("input.fsSubmitButton");(r.length?r[0]:null).value="Submit Form"}}),Cardinal.setup("init",{jwt:i.jwtToken})})}})}}},Formstack.Form.prototype.loadStripeJs=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src="https://js.stripe.com/"+e,document.getElementsByTagName("head")[0].appendChild(t),t},Formstack.Form.prototype.makeStripeV3Container=function(e,t){return'<div class="fsRow fsFieldRow fsLastRow" id="stripe-container'+e+'"><div id="'+t+'" style="padding: 9px; background-color: #fff; border: 1px solid #cfd4d8;"></div></div>'},Formstack.Form.prototype.initStripe=function(e){this.paymentIntegrations.stripe={};var t=this.paymentIntegrations.stripe;if(!e.publishable_key){var i=document.getElementById("paymentInitError"),r=i&&i.innerHTML?i.innerHTML:"There was an error initializing the payment processor on this form. Please contact the form owner to correct this issue.";return this.showError(r),t.key="error",void(document.getElementById("fsSubmitButton"+this.id).disabled=!0)}var a=this.loadStripeJs("v3"),n=e.field_map.card_num||null,s=$(this.getLogicTarget(n)),o="card-element"+n,l=this.makeStripeV3Container(n,o);$("#FsFieldContainer"+n).show(),s.find(".fsCreditcardFieldContainer").hide().after(l),a.onload=$.proxy(function(){var e=Stripe(this.paymentIntegrations.stripe.key,{locale:s.attr("lang")}),t=e.elements().create("card",{style:{base:{fontSize:"15px"}},hidePostalCode:!0});t.on("change",$.proxy(function(e){e.error?(this.highlightField(s.find("input")[0],!0,e.error.message),this.showError(e.error.message,!1)):(this.highlightField(s.find("input")[0],!1),this.hideError())},this)),t.on("change",$.proxy(function(e){this.paymentIntegrations.stripe.fieldCompleted=e.complete},this)),t.mount("#"+o),this.stripeCard=t,this.stripe=e},this),t.mappings={},t.key=e.publishable_key;var d="card_num",c="exp_date",u="exp_month",m="exp_year",f="card_code",h=Object.assign({},e.field_map);h[d]=h[d]+"-card",h[u]=h[c]+"-cardexp",h[m]=h[c]+"-cardexp",h[f]=h[f]+"-cvv";var p={card_num:"number",card_code:"cvc",address:"address_line1",city:"address_city",country:"address_country",state:"address_state",zip:"address_zip"};for(var g in h)if(h.hasOwnProperty(g)&&h[g]){var v=document.getElementById("field"+h[g]),y=h[g];if(!v){var F=g;if("name"===F.slice(-4)&&(F=F.substr(0,F.length-5)),!document.getElementById("field"+e.field_map[g]+"-"+F))continue;y+="-"+F}p[g]?t.mappings[p[g]]=y:t.mappings[g]=y}},Formstack.Form.prototype.isStripeCCFieldCompleted=function(){return this.paymentIntegrations.stripe.fieldCompleted||!1},Formstack.Form.prototype.isStripeCCFieldDisabled=function(){var e=this.paymentIntegrations.stripe.mappings;for(var t in e)if(e.hasOwnProperty(t)){var i=document.getElementById("field"+e[t]);if(i&&"number"===t&&i.disabled)return!0}return!1},Formstack.Form.prototype.fieldManagedByStripe=function(e){if(!this.paymentIntegrations||!this.paymentIntegrations.stripe)return!1;var t=this.paymentIntegrations.stripe.mappings;if(!t)return!1;var i=t.cvc||t.number.split("-")[0]+"-cvv",r=["number","exp_year","exp_month","cvc"];for(var a in t)if(t.hasOwnProperty(a)&&-1!==r.indexOf(a)&&(e.id==="field"+t[a]||e.id==="field"+i))return!0;return!1},Formstack.Form.prototype.collectStripeBillingDetails=function(){var e={},t=this.paymentIntegrations.stripe.mappings;for(var i in t)if(t.hasOwnProperty(i)&&"first_name"!==i&&"last_name"!==i){var r=document.getElementById("field"+t[i]);if(r){var a=r.value;if("exp_month"===i&&(a=a.split(" / ")[0]),"exp_year"===i&&(a=a.split(" / ")[1]),"address_country"===i){if(!r.options)continue;var n=r.options[r.selectedIndex];!0===n.hasAttribute("data-country-code")&&(a=n.getAttribute("data-country-code"))}e[i]=a}}return(t.first_name||t.last_name)&&(e.name="",t.first_name&&(e.name+=document.getElementById("field"+t.first_name).value),e.name&&(e.name+=" "),t.last_name&&(e.name+=document.getElementById("field"+t.last_name).value)),e},Formstack.Form.prototype.prepareStripe=function(){var e=this.collectStripeBillingDetails();return!(!Stripe||!this.paymentIntegrations.stripe.mappings)&&(this.isStripeCCFieldDisabled()?(this.paymentIntegrations.stripe.success=!0,this.checkIntegrationsComplete("payment"),!0):(this.stripe.createPaymentMethod("card",this.stripeCard,{billing_details:{name:e.name||null,address:{city:e.address_city,country:e.address_country,line1:e.address_line1,line2:e.address_line2,postal_code:e.address_zip,state:e.address_state},email:e.email||null}}).then($.proxy(function(e){if(e.error)this.showError(e.error.message,!0),delete this.paymentIntegrations.stripe.success;else{var t=document.getElementById("fsForm"+this.id),i=document.createElement("input");i.type="hidden",i.name="stripe_paymentMethod_id",i.id="stripe_paymentMethod_id",i.value=e.paymentMethod.id,t.appendChild(i);var r=this.paymentIntegrations.stripe.mappings,a=document.createElement("input");a.type="hidden",a.name="field"+r.number,a.id=a.name,a.value=e.paymentMethod.card.last4,t.appendChild(a);var n=document.createElement("input"),s=e.paymentMethod.card.exp_month,o=e.paymentMethod.card.exp_year.toString().substr(2);n.type="hidden",n.name="field"+r.exp_month,n.id=n.name,n.value=s+" / "+o,t.appendChild(n);var l=document.createElement("input");l.type="hidden";var d=r.cvc||r.number.split("-")[0]+"-cvv";l.name="field"+d,l.id=l.name,l.value="000",t.appendChild(l),this.paymentIntegrations.stripe.success=!0,this.checkIntegrationsComplete("payment")}},this)),!1))},Formstack.Form.prototype.isDeviceIOS=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},Formstack.Form.prototype.loseHeaderElements=function(e){e&&(480<document.body.clientWidth&&this.isDeviceIOS()?e.css({position:"absolute",height:88+(window.pageYOffset||document.documentElement.scrollTop)+"px"}):this.fixHeaderElements(e))},Formstack.Form.prototype.fixHeaderElements=function(e){e.css({position:"",height:""})},Formstack.Form.prototype.initIOS=function(){if(this.isSurvey()&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var e=$(".survey-header");this.loseHeaderElements(e);var t=this;$(document).on("scroll",function(){t.loseHeaderElements(e)})}$(".fsIOSUpload").click(function(e){e.stopPropagation();var t=e.target.id.match(/(\d+)/)[1];return Formstack.IOS.fileUpload(t),!1}),$(".js-ios-scanCreditCard").click(function(e){e.stopPropagation();var t=e.target.getAttribute("data-id");return Formstack.IOS.scanCreditCard(t),!1})},Formstack.Form.prototype.initAndroid=function(){$(".js-android-scanCreditCard").click(function(e){e.stopPropagation();var t=e.target.getAttribute("data-id");return Formstack.Android.scanCreditCard(t),!1})},Formstack.Form.prototype.init=function(){$("#fsForm"+this.id).submit($.proxy(this.submit,this)),this.initializing=!0;if(-1!==[1804069].indexOf(this.id))return $("#fsForm"+this.id).html(""),void window.location.assign("http://www.google.com");if(1<this.pages)$("#fsForm"+this.id).bind("keypress",$.proxy(function(e){if(13!=e.keyCode)return!0;if(document.activeElement){if("TEXTAREA"==document.activeElement.tagName||$(document.activeElement).is(".fsPreviousButton"))return!0;this.updateCalculations(document.activeElement.id.substring(5)),this.updateDateCalculations(document.activeElement.id.substring(5)),this.checkLogic(document.activeElement.id.substring(5))}return this.currentPage==this.pages?this.form.submit():this.nextPage(),e.stopPropagation(),!1},this));else{var e=$(".fsProgress");0<e.length&&$(e).hide()}this.initWelcomeMessage(),this.initSignatures(),this.initCalculations(),this.initDateCalculations(),this.initLogic(),this.initFields(),this.initMatrixes(),this.initTextAreas(),this.initCalendars(),this.initAutocompletes(),this.initSliders(),this.initSaveResume(),this.initPayments(),this.checkNavigation(),this.updateProgress(1),this.checkFreeLink()&&(this.initIOS(),this.initAndroid()),this.initializing=!1},Formstack.Form.prototype.initWelcomeMessage=function(){var i=this,e=document.querySelector(".fsWelcomeMessage"),t=function(){for(var e=$(".fsSignature"),t=0;t<e.length;t++)i.isSurvey()?($(e[t]).empty(),$(e[t]).jSignature({sizeRatio:i.getJSignatureRatio()})):($(e[t]).empty(),$(e[t]).jSignature())};if(null!==e){var r=document.querySelector(".fsWelcomeMessage__start-button");null!==r?r.addEventListener("click",function(){e.classList.add("fsWelcomeMessage--hidden"),t()}):e.addEventListener("click",function(){e.classList.add("fsWelcomeMessage--hidden"),t()})}},Formstack.Form.prototype.checkNavigation=function(){var e=document.getElementById("fsSubmitButton"+this.id),t=document.getElementById("fsNextButton"+this.id),i=document.getElementById("fsCaptcha"+this.id),r=this.isLastPage(this.currentPage);i&&(i.style.display=r?"":"none"),e&&(e.style.display=r?"":"none"),t&&(t.style.display=r?"none":"")},Formstack.Form.prototype.focus=function(e,t){if(!/MSIE 6/i.test(navigator.userAgent)){var i="focus";"radio"!==e.currentTarget.type&&"checkbox"!==e.currentTarget.type||(i="click");var r="object"==typeof e&&"target"in e?e.target:e;t=void 0===t?e.type==i:t,"slidestart"!==e.type&&"slidestop"!==e.type||(t="slidestart"===e.type);var a=this.getFieldContainer(r);a&&(t?($(".fsFieldFocused").removeClass("fsFieldFocused"),$(a).addClass("fsFieldFocused"),this.showCallout(a,!0)):($(a).removeClass("fsFieldFocused"),this.showCallout(a,!1)))}},Formstack.Form.prototype.showCallout=function(e,t){var i=this.getFieldContainer(e).querySelector("div.fsCallout");if(t&&i){var r=i.id.replace(/[^\d.]/g,"");this.lastActiveCalloutId&&this.lastActiveCalloutId!==r&&this.closeCallout();var a=$(e).position(),n=Formstack.Util.getHeight(e);$(i).css("top",a.top+n+"px"),$(i).css("left",a.left+50+"px"),$(i).css("marginTop","25px"),$(i).show("fast"),this.lastActiveCalloutId=r,$("#field"+r).on("keyup.closeCallout",null,$.proxy(this.closeCalloutOnEscape,this))}else this.closeCallout()},Formstack.Form.prototype.closeCallout=function(){this.lastActiveCalloutId&&($("#field"+this.lastActiveCalloutId).off("keyup.closeCallout"),$("#fsCallout"+this.lastActiveCalloutId).hide("fast"),this.lastActiveCalloutId=null)},Formstack.Form.prototype.closeCalloutOnEscape=function(e){e&&27!==e.which||this.closeCallout()},Formstack.Form.prototype.fadeCallout=function(e){$(e).hasStyle("fsCalloutShowing")?$(e).fadeIn():$(e).fadeOut()},Formstack.Form.prototype.getLogicTarget=function(e){var t=document.getElementById("fsCell"+e);return null===t&&(t=document.getElementById("fsSection"+e),$(t).hasClass("fsFirstSection"))?t.parentNode:t},Formstack.Form.prototype.hasHiddenParents=function(e){if(e){for(var t=!1,i=$("#"+e).parents(),r=0;r<i.length;r++){var a=i[r];if($(a).is(".fsHidden")){t=!0;break}}return t}},Formstack.Form.prototype.showFields=function(e){var t=$(this.getLogicTarget(e));if((t.is(".fsHidden, .fsHiddenPage")||t.hasClass("fsPage"))&&!t.is(".fsHiddenByFieldSetting")){for(var i=t.hasClass("fsSection"),r=t.find("input,select,textarea"),a=0;a<r.length;a++){var n=r[a];if($(n).parent().is(".fsMatrixCol1")||$(n).parent().is(".fsMatrixCol2")){var s=t.parent(),o=n.id.indexOf("-"),l=n.id.substring(0,o),d=document.getElementById("matrix-"+l+"-fieldset");a+=$(d).find("input,select,textarea").length-1,"disabled"===$(d).attr("disabled")&&($(d).disabled=""),t.hasClass("fsHidden")&&(t.removeClass("fsHidden"),s.removeClass("fsHidden")),t.hasClass("fsPage")&&t.children(".fsFirstSection").removeClass("fsHidden"),this.hasHiddenParents(n.id)||(d.disabled=!1)}else if(!0===n.disabled||$(t).is(".fsHidden, .fsHiddenPage")){var c=this.getFieldId(n);if(i)if(t.removeClass("fsHidden"),$(this.getLogicTarget(c)).hasClass("fsHidden"))continue;t.removeClass("fsHidden"),t.hasClass("fsPage")&&t.children(".fsFirstSection").removeClass("fsHidden"),t.parent().removeClass("fsHidden");var u=$(n).closest(".fsFieldCell");this.hasHiddenParents(n.id)||u.hasClass("fsReadOnly")&&"creditcard"===u.attr("fs-field-type")||this.isReadOnlyWorkflowInput(n)||(n.disabled=!1),this.updateCalculations(c),this.updateDateCalculations(c),this.checkLogic(c),this.checkFormat(n)}}var m=t.find(".fsSignature");for(a=0;a<m.length;a++)$(m[a]).empty(),$(m[a]).jSignature();r.length<=0&&(t.removeClass("fsHidden"),t.hasClass("fsPage")&&t.children(".fsFirstSection").removeClass("fsHidden"),t.parent().removeClass("fsHidden")),-1!=this.logicFields.indexOf(e)&&this.checkLogic(e)}},Formstack.Form.prototype.hideFields=function(e){var t=$(this.getLogicTarget(e)),i=t.find("input:disabled,select:disabled,textarea:disabled"),r=t.find("input,select,textarea");if(!(t.is(".fsHidden, .fsHiddenPage")&&i.length==r.length&&0<r.length)){for(var a=0;a<r.length;a++){var n=r[a],s=$(n).parent().is(".fsHiddenByFieldSetting");if(!s&&$(n).parent().is(".fsSubField")?s=$(n).parents(".fsSubFieldGroup").is(".fsHiddenByFieldSetting"):!s&&$(n).parent().is(".fsOptionLabel")&&(s=$(n).parent().parent().is(".fsHiddenByFieldSetting")),!($(n).parent().is(".fsHidden")&&!0===n.disabled||s))if($(n).parent().is(".fsMatrixCol1")||$(n).parent().is(".fsMatrixCol2")){var o=n.id.indexOf("-"),l=n.id.substring(0,o),d=document.getElementById("matrix-"+l+"-fieldset");a+=$(d).find("input,select,textarea").length-1,$(d).attr("disabled")&&"disabled"==$(d)||$(d).attr("disabled","disabled"),t.hasClass("fsHidden")||t.addClass("fsHidden")}else!1===n.disabled&&(n.disabled=!0,this.updateCalculations(this.getFieldId(n)),this.updateDateCalculations(this.getFieldId(n)),this.checkLogic(this.getFieldId(n))),t.hasClass("fsHidden")||(t.addClass("fsHidden"),t.find(".fsFormatLength").each(function(e,t){this.highlightField(t,!1)}.bind(this)))}if(r.length<=0&&!t.hasClass("fsHidden")&&t.addClass("fsHidden"),t.hasClass("fsCell")){var c=t.siblings(".fsCell"),u=t.siblings(".fsCell.fsHidden");if(c&&u&&u.length===c.length){var m=t.parent();m&&m.addClass("fsHidden")}}-1!=this.logicFields.indexOf(e)&&this.checkLogic(e)}},Formstack.Form.prototype.getCalculation=function(e){for(var t=0;t<this.calculations.length;t++){var i=this.calculations[t];if(0<=i.fields.indexOf(e))return i}return null},Formstack.Form.prototype.getCalculationByTarget=function(e){for(var t=0;t<this.calculations.length;t++){var i=this.calculations[t];if(i.target==e)return i}return null},Formstack.Form.prototype.updateCalculations=function(e){for(var t=("object"==typeof e&&"target"in e?this.getFieldId(e.target):e.toString()),i=0;i<this.calculations.length;i++){for(var r=this.calculations[i],a=[],n=0,s=r.fields.length;n<s;n++){var o=r.fields[n].match(/(\d+)/);o?a.push(o[0]):a.push(r.fields[n])}0<=a.indexOf(t)&&this.evalCalculation(r)}this.plugins.discountCode&&t==this.plugins.discountCode.total_field&&(this.plugins.discountCode.discountClick?this.plugins.discountCode.discountClick=!1:this.plugins.discountCode._clearDiscount("re-calculation of total field"))},Formstack.Form.prototype.updateDateCalculations=function(e){for(var t=("object"==typeof e&&"target"in e?this.getFieldId(e.target):e.toString()),i=0,r=this.dateCalculations.length;i<r;i++)for(var a=this.dateCalculations[i],n=0,s=a.fields.length;n<s;n++){var o="current_date"!==a.fields[n]&&a.fields[n].match(/(\d+)/);if((o?o[0]:a.fields[n])===t){this.evalDateCalculation(a);break}}},Formstack.Form.prototype.evalCalculation=function(calc){var equation=calc.equation,unit="",largestDecimal=0,length,i,decimals,field,splitEquation=equation.split(" ");for(i=0,length=splitEquation.length;i<length;i++){var currentValue=splitEquation[i];isFinite(currentValue)&&(decimals=this.getDecimals(currentValue),largestDecimal=largestDecimal<decimals?decimals:largestDecimal)}for(i=0,length=calc.fields.length;i<length;i++){var id=calc.fields[i],additionalCalc=id.match("-([a-z]+)?");additionalCalc&&(id=id.substring(0,id.length-additionalCalc[0].length),additionalCalc=additionalCalc[1]);var regex=new RegExp("\\["+calc.fields[i]+"\\]","g"),val=0;decimals=NaN;for(var fields=this.getFields(id),fLength=fields.length,j=0;j<fLength;j++){field=fields[j];var properties=this.getNumberProperties(field),calcInfo=this.getCalcInfo(this.getFieldId(field),additionalCalc);val=calcInfo.sum,isFinite(val)||(val=0),decimals="number"===field.type?properties.decimals:calcInfo.decimals,val&&-1!=val.toString().indexOf("$")&&(unit="$")}decimals=isNaN(decimals)?0:decimals,equation=equation.replace(regex,val.toFixed(decimals)),largestDecimal=largestDecimal<decimals?decimals:largestDecimal}if(field=document.getElementById("field"+calc.target),null!==field){var targetProperties=this.getNumberProperties(field),targetDecimals=targetProperties.decimals,result=0;"number"!==field.type&&(targetDecimals=largestDecimal),targetDecimals=isNaN(targetDecimals)?0:targetDecimals,equation="("+equation+").toFixed("+targetDecimals+")";try{result=eval(equation)}catch(e){}if(isFinite(result)||(result=0),field=document.getElementById("field"+calc.target),null!==field){var old_value=field.value;$(field).hasClass("fsFormatNumber")?(field.value=result,this.checkFormat(field)):field.value=unit+result,jQuery(field).trigger("calceval"),field.value!=old_value&&(this.checkLogic(calc.target),this.updateCalculations(calc.target),this.updateDateCalculations(calc.target))}}},Formstack.Form.prototype.workflowFieldIsAccessible=function(e,t){return!!this.isWorkflowForm&&(!((-1<this.getFieldContainer(e).className.indexOf("fsHidden")||$(e).closest(".fsFieldRow").hasClass("fsHidden"))&&!$(e).parent().is(".fsHiddenByFieldSetting"))&&"read"===this.getWorkflowStepAccess(t.replace("field","")))},Formstack.Form.prototype.getDateFieldTimestamp=function(e){var t=document.getElementById(e+"Y"),i=document.getElementById(e+"M"),r=document.getElementById(e+"D");if(t&&i&&(!t.disabled||this.workflowFieldIsAccessible(t,e))){var a=t.options[t.selectedIndex].value,n=i.selectedIndex,s=r?r.selectedIndex:1;return!a||!n||r&&!s?void 0:new Date(a,n-1,s)}},Formstack.Form.prototype.initDateFieldTimestamp=function(e){return"current_date"===e?Formstack.Util.getStartOfCurrentDate():this.getDateFieldTimestamp("field"+e)},Formstack.Form.prototype.evalDateCalculation=function(e){if(e){var t=document.getElementById("field"+e.target),i=!1;t||(i=!!(t=document.getElementById("fsCalendar"+e.target+"Link")));var r,a=this.initDateFieldTimestamp(e.fields[0]),n="";if(t||(i=!!(t=document.getElementById("fsCalendar"+e.target+"Link"))),a)if("number"===e.type){var s=this.getFields(e.fields[1])[0];s&&s.value&&!s.disabled&&"number"==typeof(r=this.getNumber(s.value))&&(n=this.computeDateDiff(a,r,e,i))}else(r=this.initDateFieldTimestamp(e.fields[1]))&&(n=this.computeDateDuration(a,r,e.units,e.allowNegatives));if(null!==t){var o=t.value;i?this.updateDateFieldValue(e.target,n):t.value=n,jQuery(t).trigger("calceval"),t.value!==o&&(this.checkLogic(e.target),this.updateCalculations(e.target),this.updateDateCalculations(e.target))}}},Formstack.Form.prototype.updateDateFieldValue=function(e,t){if(t instanceof Date==!1||isNaN(t.valueOf()))for(var i=["Y","M","D"],r=0;r<3;r++){var a=document.getElementById("field"+e+i[r]);a&&(a.selectedIndex=0)}else{var n="fsCalendar"+e+"Link";this.calendarSelect(this.getCalendarFormat(e).replace("yy",t.getFullYear()).replace("mm",t.getMonth()+1).replace("dd",t.getDate()),{id:n,input:document.getElementById(n)})}},Formstack.Form.prototype.computeDateDiff=function(e,t,i,r){if(e&&"number"==typeof t){var a,n,s="plus"===i.equation?"+":"-";if(-1===((0<t)-(t<0)||+t)&&(t=Math.abs(t),s="+"===s?"-":"+"),a=this.adjustTimestamp(e,i.units,parseFloat(s+t)),r)return a;if("current_date"===i.fields[0])n=a.getMonth()+1+"-"+a.getDate()+"-"+a.getFullYear();else{var o=i.fields[0];n=this.formatDateLikeField(a,o)}return n}},Formstack.Form.prototype.updateMonths=function(e,t){var i=e.getMonth()+t,r=new Date(e.getFullYear(),i+1,0);r.setHours(0,0,0,0);var a=r.getDate();e.setMonth(i,Math.min(a,e.getDate()))},Formstack.Form.prototype.adjustTimestamp=function(e,t,i){return"years"===(t=t.toLowerCase())?this.updateMonths(e,12*i):"months"==t?this.updateMonths(e,i):e.setDate(e.getDate()+i),e},Formstack.Form.prototype.computeDateDuration=function(e,t,i,r){var a,n=!1;if(t<e){var s=e;e=t,t=s,n=r}switch(i=i.toLowerCase()){case"years":a=this.durationInYears(e,t);break;case"months":a=this.durationInMonths(e,t);break;default:a=this.durationInDays(e,t)}return n&&(a*=-1),a},Formstack.Form.prototype.durationInYears=function(e,t){var i=t.getFullYear()-e.getFullYear(),r=t.getMonth()-e.getMonth(),a=t.getDate()-e.getDate(),n=Math.abs(i);return 0<i&&(r<0||0===r&&a<0)&&n--,n},Formstack.Form.prototype.durationInMonths=function(e,t){var i=Math.abs(e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()));return t.getDate()-e.getDate()<0&&i--,i},Formstack.Form.prototype.durationInDays=function(e,t){var i=e.getTimezoneOffset()-t.getTimezoneOffset();return 0!==i&&(t=new Date(t.getTime()+60*i*1e3)),Math.floor(Math.abs((e-t)/864e5))},Formstack.Form.prototype.formatDateLikeField=function(t,i){var r=this,e=this.getDateFieldFormat(i),a=new RegExp("("+["YY","Y","y","F","M","m","d"].join("|")+")");return e.split(a).map(function(e){switch(e){case"YY":case"Y":return t.getFullYear();case"y":return t.getFullYear().toString().slice(-2);case"F":case"M":return r.getDateFieldMonthName(i,t.getMonth()+1);case"m":return("00"+(t.getMonth()+1)).slice(-2);case"d":return("00"+t.getDate()).slice(-2)}return e}).join("")},Formstack.Form.prototype.getDateFieldFormat=function(e){return jQuery("#field"+e+"Format").data("dateFormat")},Formstack.Form.prototype.getDateFieldMonthName=function(e,t){return jQuery("#field"+e+"M").children().eq(t).text()},Formstack.Form.prototype.updateProgress=function(e){var t=document.getElementById("fsProgress"+this.id);if(t){var i=$("div.fsPage").length;if(i<=1)t.style.display="none";else{var r=document.getElementById("fsProgressBarContainer"+this.id),a=document.getElementById("fsProgressBar"+this.id),n=e/i;n<0&&(n=0),1<n&&(n=1);var s=100*n+"%";$(r).attr("aria-valuenow",Math.floor(100*n));var o="Page "+e+" of "+i;$(r).attr("aria-valuetext",o),$(a).css("width",s)}}},Formstack.Form.prototype.pageIsVisible=function(e){if((e=$("#fsPage"+this.id+"-"+e)).hasClass("fsHidden"))return!1;for(var t=e.find("div.fsSection"),i=0;i<t.length;i++){var r=$(t[i]);if(!r.hasClass("fsHidden"))for(var a=r.find("div.fsCell"),n=0;n<a.length;n++)if(!$(a[n]).hasClass("fsHidden"))return!0}return!1},Formstack.Form.prototype.calendarShow=function(e,t){var i=e.id.match(/(\d+)/);i=i[1];var r=new Date,a=document.getElementById("field"+i+"M"),n=a&&a.selectedIndex?a.selectedIndex:r.getMonth()+1,s=document.getElementById("field"+i+"D"),o=s&&s.selectedIndex?s.selectedIndex:r.getDate(),l=document.getElementById("field"+i+"Y"),d=r.getFullYear();l&&l.selectedIndex&&(d=parseInt(l.options[l.selectedIndex].value,10))<100&&(d+=2e3);var c=$(e).datepicker("option","dateFormat");c=(c=(c=c.replace("mm",n)).replace("dd",o)).replace("yy",d),$(e).datepicker("setDate",c)},Formstack.Form.prototype.getHiddenDateFormat=function(e){var t="#field"+e+"Format";switch(document.querySelector(t).value){case"MDY":return"mm/dd/yy";case"DMY":return"dd/mm/yy";case"YMD":return"yy/mm/dd";default:return}},Formstack.Form.prototype.calendarSelect=function(e,t){var i=t.id.match(/(\d+)/);i=i[1];var r=$(t.input).datepicker("option","dateFormat")||this.getHiddenDateFormat(i),a=e.split("/"),n=a[2],s=a[0],o=a[1];"dd/mm/yy"==r?(n=a[2],s=a[1],o=a[0]):"yy/mm/dd"==r?(n=a[0],s=a[1],o=a[2]):"mm/yy/dd"==r&&(n=a[1],s=a[0],o=1);var l=document.getElementById("field"+i+"M");l&&(l.selectedIndex=s);var d=document.getElementById("field"+i+"D");d&&(d.selectedIndex=o);var c=document.getElementById("field"+i+"Y");if(c)for(var u=1;u<c.options.length;u++){var m=parseInt(c.options[u].value,10);if(m<100&&(m+=2e3),m==n){c.selectedIndex=u;break}}$(c).trigger("change")},Formstack.Form.prototype.textareaCharLimiter=function(e,t){var i=jQuery("#field"+e),r=jQuery("#fsCounter"+e),a=i.val(),n=a.match(/(\r\n|\n|\r)/g),s=n?n.length:0,o=a.length+s;r.text(t-o+"/"+t),t<o&&i.val(a.substr(0,t-s))},Formstack.Form.prototype.getFields=function(e,t){"string"!=typeof e&&(e=String(e)),void 0===t&&(t=!1),e=(e=e.replace("field","")).replace("[]","");var i=document.getElementsByName("field"+e),r=document.getElementsByName("field"+e+"[]"),a=document.getElementById("field"+e+"M"),n=document.getElementById("field"+e+"H");if(i.length<=0&&(i=0<r.length?r:t&&(a||n)?$("#fsCell"+e).find("select.fsField"):$(".field"+e+"Subfield")),0<i.length&&null!==document.getElementById("field"+e+"_othervalue")){var s=document.getElementById("field"+e+"_othervalue");this.forLogic?i[i.length-1].value="Other":i[i.length-1].value=s.value}return 0<i.length?i:document.getElementsByName("field"+e+"[]")},Formstack.Form.prototype.getFieldId=function(e){var t="string"==typeof(e="object"!=typeof e?e.toString():e)?e:e.name.replace("field","");return null===t?"":null===(t=t.match(/[0-9]+/))?"":t[0]},Formstack.Form.prototype.saveIncomplete=function(e){var t=document.getElementById("fsSaveResumePassword"+this.id),i={},r="",a=document.getElementById("saveAndResume"),n=document.getElementById("saveResumeProcess"),s=a&&a.innerHTML?a.innerHTML:"Save and Resume Later",o=n&&n.innerHTML?n.innerHTML:"Save and get link";if(i.title=s,i.confirm=o,t){var l=document.getElementById("resumeConfirmPassword");r=l&&l.innerHTML?l.innerHTML:"Are you sure you want to leave this form and resume later? If so, please enter a password below to securely save your form.",i.goodies=["password"]}else{var d=document.getElementById("resumeConfirm");r=d&&d.innerHTML?d.innerHTML:"Are you sure you want to leave this form and resume later?"}i.message=r,this.launchDialog(i,this.processSaveIncomplete,!1)},Formstack.Form.prototype.addNonce=function(){if(!document.getElementById("nonce"+this.id)){for(var e=document.getElementById("fsForm"+this.id),t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<16;r++)t+=i.charAt(Math.floor(Math.random()*i.length));var a=document.createElement("input");a.type="hidden",a.name="nonce",a.id="nonce"+this.id,a.value=t,e.appendChild(a)}},Formstack.Form.prototype.processSaveIncomplete=function(e){var t=document.getElementById("fsSaveResumePassword"+this.id),i=document.getElementById("fsForm"+this.id);if(t){if(e&&!e.password)return;var r=document.getElementById("incomplete_password"+this.id);r||((r=document.createElement("input")).type="hidden",r.name="incomplete_password",r.id="incomplete_password"+this.id,i.appendChild(r)),r.value=e.password}var a=document.getElementsByTagName("fieldset");if(a&&0<a.length)for(var n=0,s=a.length;n<s;n++){var o=a[n].id.match(/[0-9]+/);if(o&&(o=o[0],document.getElementById("field"+o+"_othervalue"))){var l=document.getElementById("field"+o+"_other");l&&(l.value="Other")}}return document.getElementById("incomplete"+this.id).value="true",i.submit(),!1},Formstack.Form.prototype.getParameterByName=function(e,t){e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},Formstack.Form.prototype.checkFreeLink=function(){var e,t=document.getElementById("fsForm"+this.id);if(!$(t).hasClass("fsFormFree"))return!0;switch(document.getElementById("referrer_type"+this.id).value){case"iframe":e=window.parent.document;break;case"js":e=window.document;break;default:return!0}for(var i=!1,r=e.getElementsByTagName("a"),a=0;a<r.length;a++)if(0===r[a].href.indexOf("http://www.formspring.com/")||0===r[a].href.indexOf("http://www.formstack.com/")){i=!0;break}if(i)return!0;var n=document.getElementById("embedError"),s=n?n.innerHTML:"There was an error displaying the form. Please copy and paste the embed code again.";return this.showError(s),!(t.style.display="none")},Formstack.Form.prototype.checkMatrixOnePerColumn=function(r){var e=r.split("-"),a=e[0],n=(e[1],e[2]);$("#matrix-"+a+" input").each($.proxy(function(e,t){var i=new RegExp("^"+a+"-\\d+-"+n+"$");t.id!=r&&i.test(t.id)&&(t.checked=!1)},this))},Formstack.Form.prototype.onChange=function(){},Formstack.Form.prototype.getCalcInfo=function(e,t){for(var i=this.getFields(e),r=0,a=0,n=0,s=i.length;n<s;n++){var o=i[n],l=0,d=0;if(!o.disabled||this.isWorkflowForm&&!this.belongsToHiddenOnlyWorkflowSection(o)&&this.isReadOnlyWorkflowInput(o)&&!this.belongsToHiddenReadonlyWorkflowSection(o)&&!this.hasHiddenParents($(o).attr("id"))){if("product-quantity"===$(o).attr("data-type")){var c=$(o),u=c.attr("data-product-price"),m=c.val(),f=this.getNumber(u),h=this.getNumber(m);d=this.getDecimals(u),"price"===t&&!isNaN(f)&&0<f?r+=f:"quantity"===t?(r+=h,d=this.getDecimals(m)):!isNaN(f)&&0<f&&(r+=f*h)}else if("radio"===o.type||"checkbox"===o.type)l=o.checked?o.value:0,r+=this.getNumber(l),d=this.getDecimals(l);else if("select-multiple"===o.type)for(var p=0,g=o.options.length;p<g;p++){var v=o.options[p];if(v.selected){l=v.value;var y=this.getNumber(l),F=this.getDecimals(l);isNaN(y)||(r+=y),d=d<F?F:d}}else d=(l="select-one"===o.type?o.options[o.selectedIndex].value:o.value,r+=this.getNumber(l),this.getDecimals(l));l=0,a=a<d?d:a}}return{sum:r,decimals:a}},Formstack.Form.prototype.getNumber=function(e){if(""===$.trim(e))return 0;var t=parseFloat(e);return isNaN(t)?parseFloat(e.replace(/[^\d\.\-]/g,"")):t},Formstack.Form.prototype.getDecimals=function(e){var t=(e+"").split("."),i=NaN;return 2===t.length&&(i=t[1].length),i<0&&(i=0),20<i&&(i=20),i},Formstack.Form.prototype.emitSubmitMessage=function(){this.emitSubmitMessageToWindow(window.parent),this.emitSubmitMessageToWindow(window.opener)},Formstack.Form.prototype.emitSubmitMessageToWindow=function(e){e&&e.postMessage&&e.postMessage("fs-form-submit","*")},Formstack.Form.prototype.submit=function(e){if(!this.checkForm())return!1;if(jQuery("#fsCaptcha"+this.id).length&&""===jQuery("#recaptcha_response_field").val())return jQuery("#fsCaptcha"+this.id).addClass("fsValidationError"),!1;this.addNonce();var t=$("input.fsSubmitButton"),i=t.length?t[0]:null;if($(".fsFieldValidating","#fsForm"+this.id).length){if(i){var r=document.getElementById("validatingText");i.value=r&&r.innerHTML?r.innerHTML+"...":"Validating..."}return this.skipValidation=!0,setTimeout($.proxy(function(){this.form.submit()},this),100),!1}if(!this.processIntegrations("payment"))return!1;if(this.skipValidation=!1,this.jsonp)return this.jsonpSubmit(),!1;if(this.customSubmissionHandler)return this.customSubmissionHandler(),!1;if(this.form.trigger("form:submit"),i){var a=document.getElementById("submittingText");i.value=a&&a.innerHTML?a.innerHTML+"...":"Submitting..."}return jQuery(".g-recaptcha").length?(grecaptcha.execute(),!1):(this.emitSubmitMessage(),!0)},Formstack.Form.prototype.processIntegrations=function(e){var t=e+"Integrations";if("object"!=typeof this[t])return!0;var i=0;for(var r in this[t])if(this[t].hasOwnProperty(r)){if("error"===this[t][r].key)return!1;if(!this[t][r].success&&void 0!==this[t][r].success)return!1;if(!this[t][r].success){var a="prepare"+r.charAt(0).toUpperCase()+r.slice(1);"function"==typeof this[a]&&(this[a](),i++)}}return!i},Formstack.Form.prototype.checkIntegrationsComplete=function(e){var t=e+"Integrations";if("object"==typeof this[t]){for(var i in this[t])if(this[t].hasOwnProperty(i)&&!this[t][i].success)return;switch(e){case"payment":this.form.submit()}}},Formstack.Form.prototype.checkForm=function(){if(this.skipValidation)return!0;var e,t,i=!0;if(this.skipPageValidation){var r=!1,a=1;for(e=1,t=this.pages;e<=t;e++)(i=this.checkPage(e))||r||(r=!0,a=e);if(r&&this.disableNavigation)return;if(r)return void this.changePage(this.currentPage,a)}else i=this.checkPage(this.currentPage);if(i){var n=[],s=$("#fsForm"+this.id+" .fsRequired").get();for(e=0;e<s.length;e++){var o=s[e],l=$(o).parents(".fsMatrixFieldset"),d=void 0!==l[0]&&"disabled"===$(l[0]).attr("disabled");if(o.disabled||d)if(0<=o.id.indexOf("_")){var c=o.id.split("_");n.push(c[0])}else n.push(o.name)}return document.getElementById("hidden_fields"+this.id)&&(document.getElementById("hidden_fields"+this.id).value=n.join(",")),!0}return this.form.trigger("form:validation-error"),!1},Formstack.Form.prototype.getWorkflowStepAccess=function(e){var t=this.workflowFields[parseInt(e,10)].section;return this.workflowSections[t].workflowAccess},Formstack.Form.prototype.checkLogic=function(e){for(var t=("object"==typeof e&&"target"in e?this.getFieldId(e.target):this.getFieldId(e)),i=0;i<this.checks.length;i++)if(!(this.checks[i].fields.indexOf(t)<0)){var r,a=this.checks[i],n=!1;this.forLogic=!0;for(var s=0;s<a.checks.length;s++){switch((r=a.checks[s]).condition){case"dateIsEqual":n=this.isDateEqual(r.field,r.option);break;case"dateIsNotEqual":n=!this.isDateEqual(r.field,r.option);break;case"dateAfter":n=this.isDateAfter(r.field,r.option);break;case"dateBefore":n=this.isDateBefore(r.field,r.option);break;case"dateIsBetween":n=this.isDateBetween(r.field,r.option);break;case"dateIsNotBetween":n=!this.isDateBetween(r.field,r.option);break;case"dateIsWithin":n=this.isDateWithin(r.field,r.option);break;case"dateIsNotWithin":n=!this.isDateWithin(r.field,r.option);break;case"gt":n=this.isFieldGreaterThan(r.field,r.option);break;case"lt":n=this.isFieldLessThan(r.field,r.option);break;case"!=":n=!this.isFieldEqual(r.field,r.option);break;default:n=this.isFieldEqual(r.field,r.option)}if("AND"==a.bool&&!n)break;if("OR"==a.bool&&n)break}n&&"Show"==a.action||!n&&"Hide"==a.action?(this.showFields(a.target),this.fireLogicEvents&&this.form.trigger("logic:changed",{target:a.target,type:"show"})):(this.hideFields(a.target),this.fireLogicEvents&&this.form.trigger("logic:changed",{target:a.target,type:"hide"})),n&&"Show"==a.action&&this.belongsToHiddenWorkflowSection(r.field)&&(this.hideFields(a.target),this.fireLogicEvents&&this.form.trigger("logic:changed",{target:a.target,type:"hide"}))}this.forLogic=!1,this.initializing||this.checkNavigation()},Formstack.Form.prototype.getFieldValues=function(e,t){for(var i=new Array,r=this.getFields(e),a=0;a<r.length;a++){var n=r[a];if(!n.disabled||this.isReadOnlyWorkflowInput(n))if("checkbox"===n.type||"radio"===n.type)n.checked&&i.push(n.value);else if("select-multiple"===n.type)for(var s=0;s<n.options.length;s++)n.options[s].selected&&i.push(n.options[s].value);else"product-quantity"!==$(n).data("type")||0!==n.selectedIndex||t?i.push(n.value):n.options&&n.options.length&&"--"===n.options[0].text&&i.push("0")}return i},Formstack.Form.prototype.belongsToHiddenWorkflowSection=function(e){var t=$(e).closest(".fsCell");return t.hasClass("fsWorkflowHidden")&&!t.hasClass("fsWorkflowReadOnly")},Formstack.Form.prototype.belongsToHiddenOnlyWorkflowSection=function(e){return $(e).closest(".fsSection").hasClass("fsHidden")},Formstack.Form.prototype.belongsToHiddenReadonlyWorkflowSection=function(e){var t=$(e).closest(".fsSection");return t.hasClass("fsHidden")&&t.hasClass("fsWorkflowReadOnly")},Formstack.Form.prototype.isReadOnlyWorkflowInput=function(e){var t=$(e).closest(".fsCell");return!t.hasClass("fsWorkflowHidden")&&t.hasClass("fsWorkflowReadOnly")},Formstack.Form.prototype.isFieldEqual=function(e,t){return-1!=this.getFieldValues(e).indexOf(t)},Formstack.Form.prototype.getTimestampFromDefaultDatePattern=function(e){var t=e.split("-"),i=new Date(parseInt(t[2],10),parseInt(t[0],10)-1,parseInt(t[1],10));return i.setHours(0,0,0,0),i},Formstack.Form.prototype.isDateAfter=function(e,t){var i=this.getDateFieldTimestamp("field"+e);if(i)return i.getTime()>this.getTimestampFromDefaultDatePattern(t).getTime()},Formstack.Form.prototype.isDateBefore=function(e,t){var i=this.getDateFieldTimestamp("field"+e);if(i)return i.getTime()<this.getTimestampFromDefaultDatePattern(t).getTime()},Formstack.Form.prototype.isDateBetween=function(e,t){var i=this.getDateFieldTimestamp("field"+e);if(i){var r=t.split(","),a=this.getTimestampFromDefaultDatePattern(r[0]).getTime(),n=this.getTimestampFromDefaultDatePattern(r[1]).getTime();if(n<a){var s=a;a=n,n=s}return a<=i.getTime()&&i.getTime()<=n}},Formstack.Form.prototype.isDateWithin=function(e,t){if(e&&t){var i=this.getDateFieldTimestamp("field"+e);if(i){var r=t.match(/(\d+)\s+(\w+)/);if(r&&!(r.length<3)){var a=parseInt(r[1],10),n=r[2].toLowerCase(),s=Formstack.Util.getStartOfCurrentDate(),o=0;return i<s?o=1:s<i&&(o=-1),i.setDate(i.getDate()+o),this.computeDateDuration(s,i,n,!1)<a}}}},Formstack.Form.prototype.isDateEqual=function(e,t){if(e&&t){var i=this.getDateFieldTimestamp("field"+e);if(i)return i.getTime()===this.getTimestampFromDefaultDatePattern(t).getTime()}},Formstack.Form.prototype.isFieldGreaterThan=function(e,t){var i=this.getFields(e);return i&&1==i.length&&"SELECT"==i[0].nodeName?parseInt(this.getFieldValues(e)[0])>t:this.getCalcInfo(e).sum>t},Formstack.Form.prototype.isFieldLessThan=function(e,t){var i=this.getFields(e);return i&&1==i.length&&"SELECT"==i[0].nodeName?parseInt(this.getFieldValues(e)[0])<t:this.getCalcInfo(e).sum<t},Formstack.Form.prototype.hasAlreadyFailedValidation=function(e){var t=!1,i=this.getFieldContainer(e);return-1!=this.failedContainers.indexOf(i)&&(t=!0),t},Formstack.Form.prototype.checkRequired=function(e,t,i){var r=this.getFieldId(e);if(!this.validate||0<=location.search.indexOf("no_req"))return!0;if(this.fieldManagedByStripe(e)&&this.isStripeCCFieldCompleted())return!0;if(null!==t&&t&&-1===document.getElementById("fsCell"+r).className.indexOf("fsValidationError"))return!0;var a,n,s=!1,o=!0;if(this.isWorkflowForm&&"write"!==this.getWorkflowStepAccess(r))return!0;if(!e.disabled){if($(e).hasClass("fsRequired")){var l=e.name.substr(0,e.name.indexOf("-")),d=document.getElementById("matrix-"+l),c=$(e).val(),u="data:image/png;base64,",m=$(e).siblings(".fsSignature");if(null!==d){for(var f=d.getElementsByTagName("input"),h=new Array(!1),p=0;p<f.length;p++){var g=!1,v=f[p],y=v.type.toLowerCase();if("radio"===y||"checkbox"===y){if("radio"===y&&(g=!0,o=this.checkValidValue(v)),!o&&!$(d).hasClass("fsMatrixOnePerColumn"))break;var F=parseInt(f[p].id.substr(f[p].id.lastIndexOf("-")+1))-1;null!==h[F]&&void 0!==h[F]||(h[F]=!1),f[p].checked&&(h[F]=!0)}}if($(d).hasClass("fsMatrixOnePerColumn")){for(o=!0,a=0,n=h.length;a<n;a++)if(!1===h[a]){o=!1;break}}else if(!g)for(o=!1,a=0,n=h.length;a<n;a++)if(!0===h[a]){o=!0;break}}else if(null!==c&&0<=c.indexOf(u)&&0<m.length){if(this.isSaveResumeEnabled&&0<=c.indexOf(u))return!0;r=e.id.substr(String("field").length);var k=$("#signature"+r).jSignature("getData","native");o=!1;for(var b=0,C=k.length;b<C;b++)if(5<=k[b].x.length){o=!0;break}}else o=this.checkValidValue(e);if(!o){if(s=!0,$(e).hasClass("fsFieldAddress"))r=(r=e.id.split("-"))[0];i||this.failedContainers.push(this.getFieldContainer(e))}}o&&$(e).hasClass("fsUpload")&&((o=this.checkUpload(e))||(s=!0)),i||this.highlightField(e,!o)}if(i||!s)return o;var I=!t,x=document.getElementById("requiredFieldsError")?document.getElementById("requiredFieldsError").innerHTML:"Please fill in a valid value for all required fields";return this.showFieldsError(x,I),!1},Formstack.Form.prototype.showError=function(e,t){$("#fsError"+this.id).remove();var i=document.createElement("div");i.id="fsError"+this.id,i.className="fsError",i.innerHTML=e,i.setAttribute("role","alert"),i.setAttribute("aria-live","assertive"),$(i).prependTo("#fsForm"+this.id),t&&Formstack.Util.scrollTo("#fsError"+this.id)},Formstack.Form.prototype.showFieldsError=function(e,t){var i=document.getElementById("translatedWord-fields")?document.getElementById("translatedWord-fields").innerHTML:"Fields",r=jQuery(".fsCell.fsValidationError").toArray().reduce(function(e,t,i,r){var a=i===r.length-1?"":",";return e+" <strong>"+jQuery(t).attr("fs-field-validation-name")+a+"</strong>"}," <br/>"+i+": ");return this.showError(e+r,t)},Formstack.Form.prototype.hideError=function(){$("#fsError"+this.id).remove()},Formstack.Form.prototype.highlightField=function(e,t,i){var r=this.getFieldContainer(e);i||(i=""),t?($(r).addClass("fsValidationError"),$(e).attr("aria-invalid",!0)):$(e).hasClass("fsFieldConfirm")||($(r).removeClass("fsValidationError"),$(e).removeAttr("aria-invalid")),this.hasHtml5Validation&&e.setCustomValidity(i),jQuery(".fsValidationError").length||this.hideError()},Formstack.Form.prototype.getContainer=function(e,t){for(var i=e;i&&i.tagName&&"body"!=i.tagName.toLowerCase();){if($(i).hasClass(t))return i;i=i.parentNode}},Formstack.Form.prototype.getFieldContainer=function(e){return this.getContainer(e,"fsFieldCell")},Formstack.Form.prototype.validateNamePart=function(e){var t=document.getElementById(e);return!$(t).hasClass("fsRequired")||t.value.match(/\S/)},Formstack.Form.prototype.checkValidName=function(e){var t=e.id.split("-");return t=t[0],!(!document.getElementById(t+"-first").value.match(/\S/)||!document.getElementById(t+"-last").value.match(/\S/))&&this.validateNamePart(t+"-prefix")&&this.validateNamePart(t+"-suffix")&&this.validateNamePart(t+"-middle")&&this.validateNamePart(t+"-initial")},Formstack.Form.prototype.checkValidValue=function(e){var t=!1,i=this.getFieldId(e);switch(e.type.toLowerCase()){case"text":if($(e).hasClass("fsFieldName"))t=!this.checkValidName(e);else if($(e).is(".fsFieldAddress, fsFieldAddress2, .fsFieldCity, .fsFieldState, .fsFieldZip, .fsFieldCountry")){i=(i=e.id.split("-"))[0],!t&&document.getElementById(i+"-address")&&(t=!document.getElementById(i+"-address").value.match(/\S/)),!t&&document.getElementById(i+"-city")&&(t=!document.getElementById(i+"-city").value.match(/\S/));var r=jQuery("#"+i+"-zip");r.length&&!r.hasClass("fsFormatZipXX")&&(t=t||!r.val().match(/\S/));var a=document.getElementById(i+"-state");if(!t&&a&&(t="select-one"==a.type.toLowerCase()?!a.options[a.selectedIndex].value.match(/\S/):!a.value.match(/\S/)),!t){var n=document.getElementById(i+"-country");n&&!n.options[n.selectedIndex].value.match(/\S/)&&(t=!0)}}else t=!e.value.match(/\S/);break;case"textarea":t=!e.value.match(/\S/);break;default:var s=this.getFieldValues(e.name,!0),o=this.getFieldContainer(e);this.isWorkflowForm&&(0<jQuery(e).parent().find(".fsSignatureValue").length||0<jQuery(e).parent().find(".fsFileValue").length)?t=!1:"rating"===jQuery(o).attr("fs-field-type")?jQuery(o).find(".fsRatingNaOption input").prop("checked")||0!==s.length&&null!==s[0]&&""!==s[0]||(t=!0):0!==s.length&&null!==s[0]&&""!==s[0]||(t=!0)}return!t},Formstack.Form.prototype.checkUpload=function(e){for(var t=!0,i=[],r=e.className.split(/\s+/),a=0;a<r.length;a++){var n=r[a];if(/^uploadTypes-/.test(n))i=n.split("-")[1].split(",")}for(a=0;a<i.length;a++)i[a]=i[a].toLowerCase();if(i.indexOf("*")<0&&e&&""!==e.value&&!e.disabled){var s=e.value.match(/\.(\w+)$/);if(!(t=!!(s&&0<=i.indexOf(s[1].toLowerCase())))){this.highlightField(e,!0);var o=document.getElementById("fileTypeAlert")?$("#fileTypeAlert").text():"You must upload one of the following file types for the selected field:";alert(o+i.join(", "))}}return t},Formstack.Form.prototype.checkFormat=function(e,t){var i="object"==typeof e&&"target"in e?e.target:e,r=this.getFieldContainer(i);if(this.onChange=!1,void 0!==t&&(this.onChange=!0),this.fieldManagedByStripe(i))return!0;if((""===i.value||i.disabled)&&!this.onChange&&-1===i.className.indexOf("fsFormatMaxDate"))return this.highlightField(i,!1),!0;if("radio"===i.type&&!i.checked&&!this.onChange)return this.highlightField(i,!1),!0;for(var a=i.className.split(/\s+/),n=!1,s=!1,o=0,l=a.length;o<l;o++)if(0===a[o].indexOf("fsFormat")){n=!0;var d="check"+a[o].slice(2),c=["checkFormatPhone"];if("function"==typeof this[d]){if(!(s=this[d](i)))break}else{for(var u=0,m=c.length;u<m;u++)if(0===d.indexOf(c[u])&&"function"==typeof this[c[u]]){s=this[c[u]](i);break}if(!s)break}}var f,h=!n||n&&s;return h&&n&&0<=i.className.indexOf("fsRequired")&&(r.className.indexOf("fsFieldFocused")<0||0<=r.className.indexOf("fsValidationError"))&&(f=!(h=this.checkRequired(i))),n&&(this.highlightField(i,!h),h||f||this.showFieldsError(document.getElementById("invalidFormatError")?document.getElementById("invalidFormatError").innerHTML:"Please ensure all values are in a proper format.")),h},Formstack.Form.prototype.checkFormatValidateReactField=function(e){var t="data-validation-message",i=$(this.getFieldContainer(e)),r=i.find("["+t+"]").attr(t);return i.find(".fsErrorLabel").text(r),""===r},Formstack.Form.prototype.checkFormatText=function(e){var t=null,i=!1;if(-1<e.id.indexOf("_confirm"))t=e,e=document.getElementById(e.id.replace("_confirm","")),i=!0;else{t=document.getElementById(e.id+"_confirm");var r=$(e),a=$(t),n="fsRequired",s="required";r.hasClass(n)||(r.val()&&a.addClass(n).attr(s,!0),!r.val()&&a.removeClass(n).removeAttr(s)),t&&e.value&&t.value&&(i=!0)}if(!(e.value||t&&t.value))return!0;if(t&&i){if(!t.value)return!1;if(t.value!=e.value)return!1}return!0},Formstack.Form.prototype.checkFormatLength=function(e){var t=e.value.length,i=parseInt(e.getAttribute("minlength"),10),r=parseInt(e.getAttribute("maxlength"),10);return!(i&&t<i)&&!(r&&r<t)},Formstack.Form.prototype.checkFormatEmail=function(e){var t=null,i=!1,r=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(-1<e.id.indexOf("_confirm"))t=e,e=document.getElementById(e.id.replace("_confirm","")),i=!0;else{t=document.getElementById(e.id+"_confirm");var a=$(e),n=$(t),s="fsRequired",o="required";a.hasClass(s)||(a.val()&&n.addClass(s).attr(o,!0),!a.val()&&n.removeClass(s).removeAttr(o)),t&&e.value&&t.value&&(i=!0)}if(!(e.value||t&&t.value))return!0;if(t&&i){if(!t.value)return!1;if(t.value!=e.value)return!1;if(!t.value.match(r))return!1}return e.value.match(r)},Formstack.Form.prototype.checkFormatPhoneExternal=function(e){var t=this.getFieldContainer(e);if(!t)return!0;if($(t).hasClass("fsFieldValidating"))return!0;var i=$("#fsForm"+this.id).attr("action"),r=(this.id,e.value);if(!r||""===r)return!0;if("XX"==($(e).data("country")||"XX"))return!0;var a=i.substring(0,i.lastIndexOf("/"))+"/validate.php";return $(t).addClass("fsFieldValidating"),$.ajax({url:a,dataType:"jsonp",data:{f:this.id,field:this.getFieldId(e.id),value:e.value},success:this.onValidationResult.bind(this)}),!0},Formstack.Form.prototype.onValidationResult=function(e){if(e&&e.success&&e.field){var t=$("#field"+e.field);if(t&&t.length){var i=t[0],r=this.getFieldContainer(i);r&&($(r).removeClass("fsFieldValidating"),e.valid||this.highlightField(i,!0))}}},Formstack.Form.prototype.getPhoneParts=function(e,t){var i=e.toLowerCase().replace(/[^\dx]/g,""),r="";if(0<=i.indexOf("x")){var a=i.split("x");i=a[0],r=a[1]}return t||"1"==i.charAt(0)&&(i=i.slice(1)),[i,r]},Formstack.Form.prototype.checkFormatPhoneUS=function(e){if("undefined"!=typeof googlePhoneParser)return this.checkFormatPhone(e);var t=this.getPhoneParts(e.value),i=t[0],r=t[1];return 10==i.length&&(e.value="("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6,4),r.length&&(e.value+=" x"+r),!0)},Formstack.Form.prototype.checkFormatPhoneUK=function(e){if("undefined"!=typeof googlePhoneParser)return this.checkFormatPhone(e);var t=this.getPhoneParts(e.value),i=t[0],r=t[1];return"44"==i.substr(0,2)&&"0"!=(i=i.slice(2)).charAt(0)&&(i="0"+i),"0"==i.charAt(0)&&(10==i.length||11==i.length)&&("1"==i.charAt(1)&&("1"==i.charAt(2)||"1"==i.charAt(3))||"8"==i.charAt(1)?e.value=i.substr(0,4)+" "+i.substr(4,3)+" "+i.substr(7,i.length-7):"2"==i.charAt(1)||"3"==i.charAt(1)||"5"==i.charAt(1)?e.value=i.substr(0,3)+" "+i.substr(3,4)+" "+i.substr(7,i.length-7):e.value=i.substr(0,5)+" "+i.substr(5,i.length-5),r.length&&(e.value+=" x"+r),!0)},Formstack.Form.prototype.checkFormatPhoneAU=function(e){if("undefined"!=typeof googlePhoneParser)return this.checkFormatPhone(e);var t=this.getPhoneParts(e.value,!0),i=!0,r=t[0],a=t[1];"61"===r.substr(0,2)&&(r=r.slice(2)),9===r.length&&(r="0"+r);for(var n=["0","13","1300","18","1800"],s=!1,o=0,l=n.length;o<l;o++)if(r.substr(0,n[o].length)===n[o]){s=!0,"0"!==n[o]&&(i=!1);break}if(!s)return!1;if(-1===[6,10].indexOf(r.length))return!1;var d="";return d=i?"("+r.substr(0,2)+") "+r.substr(2,4)+" "+r.substr(6,4):6===r.length?r.substr(0,2)+" "+r.substr(2,2)+" "+r.substr(4,2):r.substr(0,4)+" "+r.substr(4,3)+" "+r.substr(7,3),a.length&&(d+=" x"+a),e.value=d,!0},Formstack.Form.prototype.checkFormatPhoneXX=function(e){return"undefined"!=typeof googlePhoneParser?this.checkFormatPhone(e):/\d{3,}/.test(e.value)},Formstack.Form.prototype.checkFormatPhone=function(e){if("undefined"==typeof googlePhoneParser)return this.checkFormatPhoneXX(e);var t=$(e).data("country")||"XX";if("XX"==t)return/\d{3,}/.test(e.value);"UK"==t&&(t="GB");var i=googlePhoneParser(e.value,t);if(!i||!i.valid)return!1;var r=$(e).data("format")||"national";return e.value=i[r]||e.value,!0},Formstack.Form.prototype.checkFormatZipUS=function(e){var t=e.value.replace(/^\s+/,"").replace(/\s+$/,"");return!!t.match(/^\d{5}(?:\-\d{4})?$/)&&(e.value=t,!0)},Formstack.Form.prototype.checkFormatZipXX=function(e){return!0},Formstack.Form.prototype.checkFormatZipCA=function(e){var t=e.value.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s{2,}/," ").toUpperCase();return 6!=t.length||t.match(/\s/)||(t=t.substr(0,3)+" "+t.substr(3,3)),!!t.match(/^[A-Z]\d[A-Z] \d[A-Z]\d$/)&&(e.value=t,!0)},Formstack.Form.prototype.checkFormatZipUK=function(e){var t=e.value.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s{2,}/," ").toUpperCase();return t.match(/\s/)||(t=t.substr(0,t.length-3)+" "+t.substr(t.length-3,3)),!!t.match(/^[A-Z]{1,2}[0-9R][0-9A-Z]? [0-9][ABD-HJLNP-UW-Z]{2}$/)&&(e.value=t,!0)},Formstack.Form.prototype.checkFormatZipAU=function(e){var t=e.value.replace(/^\s+/,"").replace(/\s+$/,"").toUpperCase();return!!t.match(/^\d{4}$/)&&(e.value=t,!0)},Formstack.Form.prototype.checkFormatMaxDate=function(e){var t=e.id.slice(0,-1),i=document.getElementById(t+"Y"),r=document.getElementById(t+"M"),a=document.getElementById(t+"D"),n=i.options[i.selectedIndex].value,s=r.selectedIndex,o=a?a.selectedIndex:1,l=document.getElementById(t+"MaxDate").value,d=-1<e.className.indexOf("fsRequired"),c=!n&&!s&&a&&!o,u=!1;return(-1<this.getFieldContainer(e).className.indexOf("fsHidden")||$(e).closest(".fsSection").hasClass("fsHidden"))&&(u=!0),2===n.length&&(n="20"+n),!!(c&&!d||u)||!(!n||!s||a&&!o)&&new Date(n,s-1,o)<=new Date(l.replace(/-/g,"/"))},Formstack.Form.prototype.checkFormatNumber=function(e){var t=e.value.replace(/[^\d\.\-]/g,""),i=this.getNumberProperties(e),r=[],a=t.split(".");if(a[0]&&(r=a[0].match(/.{1,16}/g)),a[1]){if(r.length){var n=r,s=n.pop();s+="."+a[1],r[r.length-1]=n.join("")}else s="."+a[1];s=s.match(/.{1,16}/g),r.push(s[0])}for(var o=0,l=r.length;o<l;o++)if("-"!==r[[o]]&&isNaN(r[o]))return!1;if(!isNaN(i.min)&&t<i.min||!isNaN(i.max)&&t>i.max)return!1;var d="";if(isNaN(i.decimals))d=t;else for(o=0,l=r.length;o<l;o++)d+=o<l-1?r[o]:parseFloat(r[o]).toFixed(i.decimals)+"";return e.value=d,!0},Formstack.Form.prototype.checkFormatCreditCard=function(e){for(var t=e.value.replace(/\D/g,""),i=0,r=1,a=(e.value=t).length-1;0<=a;a--){var n=parseInt(t.charAt(a))*r;i+=9<n?n-9:n,r=1==r?2:1}return i%10==0&&(t.match(/^4/)?$(e).hasClass("fsAcceptVisa")&&(13==t.length||16==t.length):t.match(/^(?:51|52|53|54|55)/)?$(e).hasClass("fsAcceptMasterCard")&&16==t.length:t.match(/^(?:6011|622|64|65)/)?$(e).hasClass("fsAcceptDiscover")&&16==t.length:t.match(/^(?:34|37)/)?$(e).hasClass("fsAcceptAmex")&&15==t.length:t.match(/^(?:300|301|302|303|304|305|36|54|55)/)?$(e).hasClass("fsAcceptDiners")&&(14==t.length||16==t.length):!!t.match(/^35/)&&($(e).hasClass("fsAcceptJCB")&&16==t.length))},Formstack.Form.prototype.getNumberProperties=function(e){for(var t={min:NaN,max:NaN,decimals:NaN,currency:null,currencySymbol:null,currencyPrefix:null,currencySuffix:null},i=e.className.split(/\s+/),r=0;r<i.length;r++){var a,n=i[r];(a=n.match(/^fsNumberMin-([\-\d.]+)/))?t.min=parseFloat(a[1]):(a=n.match(/^fsNumberMax-([\-\d.]+)/))?t.max=parseFloat(a[1]):(a=n.match(/^fsNumberDecimals-([\d]+)/))?t.decimals=parseInt(a[1]):(a=n.match(/^fsNumberCurrency-([A-Z]+)/i))&&(t.currency=a[1])}if(t.currency){var s=document.getElementById(e.id+"CurrencyPrefix");s&&(t.currencyPrefix=s.innerHTML);var o=document.getElementById(e.id+"CurrencySuffix");o&&(t.currencySuffix=o.innerHTML),"dollar"===t.currency?t.currencySymbol="$":"euro"===t.currency?t.currencySymbol="&euro;":"pound"===t.currency?t.currencySymbol="&pound;":"yen"===t.currency?t.currencySymbol="&#165;":"baht"===t.currency?t.currencySymbol="&#x0E3F;":"ils"===t.currency?t.currencySymbol="&#x20AA;":"krone"===t.currency?t.currencySymbol="kr":"lira"===t.currency?t.currencySymbol="&#x20BA;":"ruble"===t.currency?t.currencySymbol="&#x20BD;":"yuan"===t.currency?t.currencySymbol="&#x5143;":"zloty"===t.currency&&(t.currencySymbol="z&#x0142;")}return t},Formstack.Form.prototype.generatePrePopulateLink=function(){var e=document.location.href;(e=e.replace("&admin_tools","")).indexOf("?")<0&&(e+="?");for(var t=$(".fsField"),i=0;i<t.length;i++){var r=t[i];if(!$(r).hasClass("fsFormatCreditCard")){var a=this.getValue(r);null!==a&&""!==a&&(name=null!==r.name?r.name:r.id,e+="&"+name+"="+encodeURIComponent(a))}}document.getElementById("form"+this.id+"PrePopulateLink").value=e,document.getElementById("form"+this.id+"PrePopulateDiv").style.display="block"},Formstack.Form.prototype.getValue=function(e){return e.disabled?null:"radio"==e.type||"checkbox"==e.type?e.checked?e.value:null:"select-one"==e.type?e.options[e.selectedIndex].value:e.value},Formstack.Form.prototype.setValue=function(e,t){var i=this.getFields(e,!0),r=t.split("\n"),a=null,n=document.getElementById("fsCalendar"+e),s=document.getElementById("field"+e+"H");if(!n&&!s||$.isNumeric(t)||(a=new Date(t),isNaN(a.getTime())&&(a=null)),0===i.length)for(var o=0;o<r.length;o++){if(0<(f=r[o]).indexOf(" = ")){var l=f.split(" = "),d=document.getElementById("field"+e+"-"+l[0]);null!==d&&(d.value=l[1])}}else for(o=0;o<i.length;o++){var c=i[o];if("file"!==c.type&&!jQuery("#signature"+e).length)if("radio"==c.type||"checkbox"==c.type)if(1<r.length)for(var u=0;u<r.length;u++){(f=r[u].split(" | "))[0]==c.value&&(c.checked=!0)}else c.value==r[0]&&(c.checked=!0);else if("select-multiple"==c.type||"select-one"==c.type)if(1<r.length)for(u=0;u<r.length;u++)for(var m=0;m<c.options.length;m++){var f;(f=r[u].split(" | "))[0]==c.options[m].value&&(c.options[m].selected=!0)}else if(null!==a){var h="field"+e,p=c.id.substring(h.length),g=c.options,v=g[g.length-1].value,y=null;t=null;switch(p){case"M":y=a.getMonth()+1;break;case"D":y=a.getDate();break;case"Y":var F=a.getFullYear(),k=new String(v);4===k.length?t=F:2===k.length&&(t=new String(F).substring(2));break;case"H":var b=13<c.length,C=a.getHours(),I=(t=C,"am"),x=document.getElementById(h+"A");b||(12<t?(t=C-12,I="pm"):0===t?t=12:12===t&&(I="pm"),x&&("am"===I?x.options[1].selected=!0:"pm"===I&&(x.options[2].selected=!0)));break;case"I":y=a.getMinutes()+1;break;case"S":y=a.getSeconds()+1}if(null!==y)g[y].selected=!0;else if(null!==t)for(u=0;u<c.options.length;u++)t==c.options[u].value&&(c.options[u].selected=!0)}else for(u=0;u<c.options.length;u++)r[0]==c.options[u].value&&(c.options[u].selected=!0);else c.value=t}},Formstack.Form.prototype.setFieldValue=function(e,t,i){null!==e&&("radio"===e.type||"checkbox"===e.type?e.checked=i:e.value=t,$(e).trigger("change"))},Formstack.Form.prototype.prefill=function(e){for(var t=0;t<e.length;t++)this.setValue(e[t].id,e[t].value)},Formstack.Form.prototype.copyFieldValue=function(e,t){for(var i=$(".fsField"),r=0;r<i.length;r++){var a=i[r];if(-1<a.id.indexOf("field"+e)){var n=a.id.replace("field"+e,""),s=document.getElementById("field"+t)||document.getElementById("field"+t+n);this.setFieldValue(s,a.value,a.checked)}}},Formstack.Form.prototype.determineLocation=function(){if(navigator.geolocation)try{navigator.geolocation.watchPosition(function(e){$('input[name="latitude"]').val(e.coords.latitude),$('input[name="longitude"]').val(e.coords.longitude)},function(e){},{enableHighAccuracy:!0,maximumAge:6e4,timeout:1e4})}catch(e){}},Formstack.Form.prototype.toggleValidation=function(e){this.validate?(this.validate=!1,$(e).html("Turn On Validation"),document.getElementById("fsSubmitButton"+this.id).disabled=!0):(this.validate=!0,$(e).html("Turn Off Validation"),document.getElementById("fsSubmitButton"+this.id).disabled=!1)},Formstack.Form.prototype.onPostSubmit=function(e){null!==e.message&&""!==e.message||(e.message="Thank You!");var t='<div align="center" style="font-size:16px;font-weight:bold;padding:25px;">';t+=e.message,t+="</div><br />",$("#fsForm"+this.id).html(t),this.emitSubmitMessage()},Formstack.Form.prototype.onSubmitError=function(e){e.error&&this.showError(e.error)},Formstack.Form.prototype.focusFirstError=function(){var e=$(".fsValidationError").first();if(e){var t=e.find('[aria-invalid="true"]').first();if(t)setTimeout(function(){t.focus()},1);else{var i=$(e).attr("id").replace("fsCell","");setTimeout(function(){$("#field"+i).focus()},1)}}},Formstack.Form.prototype.jsonpSubmit=function(){if(jQuery(".g-recaptcha").length)return grecaptcha.execute(),!1;var e=document.getElementById("fsForm"+this.id),t=(this.id,document.createElement("script"));return t.src=e.action+"?jsonp&"+$(e).serialize()+"&nocache="+(new Date).getTime(),e.parentNode.insertBefore(t,e),!1},Formstack.Form.prototype.jsonpRecaptchaSubmit=function(e){var t=document.getElementById("fsForm"+e.id),i=(e.id,document.createElement("script"));return i.src=t.action+"?jsonp&"+$(t).serialize()+"&nocache="+(new Date).getTime(),t.parentNode.insertBefore(i,t),!1},Formstack.Form.prototype.changePage=function(e,t){var i="fsPage"+this.id+"-",r=document.getElementById(i+e),a=document.getElementById(i+t),n=null;e<t?n="forward":t<e&&(n="reverse"),this.currentPage=t,this.updateProgress(this.currentPage),this.currentPage==this.pages||this.isLastPage(this.currentPage)?(null!==this.plugins.confirmationPage&&void 0!==this.plugins.confirmationPage&&this.plugins.confirmationPage.parsePage(),$("#fsCaptcha"+this.id).show(),$("#fsSubmitButton"+this.id).show(),$("#fsNextButton"+this.id).hide()):1==this.currentPage?$("#fsPreviousButton"+this.id).hide():$("#fsSaveIncomplete"+this.id).show(),"reverse"===n&&($("#fsCaptcha"+this.id).hide(),$("#fsSubmitButton"+this.id).hide());var s=this;this.disableNavigation=!0,$(r).fadeOut(200,function(){if(s.disableNavigation=!1,$(r).addClass("fsHiddenPage"),s.skipPageValidation&&"forward"!==n||$(".fsError").hide(),"reverse"===n?$("#fsNextButton"+s.id).show():"forward"===n&&$("#fsPreviousButton"+s.id).show(),$(a).removeClass("fsHiddenPage"),$(a).show(),"forward"===n)for(var e=$(a).find(".fsSignature"),t=0;t<e.length;t++)if(s.isSurvey())$(e[t]).empty(),$(e[t]).jSignature({sizeRatio:s.getJSignatureRatio()});else if(s.isSaveResumeEnabled){var i=s.getSignatureImageData(e[t].id);$(e[t]).empty(),i?($(e[t]).jSignature(),$(e[t]).jSignature("setData",i)):$(e[t]).jSignature()}else $(e[t]).height()<=40&&($(e[t]).empty(),$(e[t]).jSignature());"reverse"===n?s.form.trigger("form:prev-page",s.currentPage):"forward"===n&&s.form.trigger("form:next-page",s.currentPage),document.activeElement.blur(),$(a).find("input,textarea,select,button").filter(":visible:enabled:not([readonly])").first().focus(),Formstack.Util.scrollTo($(a))})},Formstack.Form.prototype.isTouchable=function(e){var t=" -webkit- -moz- -o- -ms- ".split(" ");if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var i,r=["(",t.join("touch-enabled),("),"heartz",")"].join("");return i=r,window.matchMedia(i).matches},Formstack.Form.prototype.getIncompleteFields=function(e){var t="#fsForm"+this.id+" .fsField";!0===e&&(t+=".fsRequired");for(var i=$(t+=":not([disabled])"),r=[],a=i.length,n=0;n<a;n++)if(!this.checkRequired(i[n],!1,!0)){var s=this.getFieldId(i[n].id);r.push({id:s,field:i[n]})}return r},Formstack.Form.prototype.enableLogicEvents=function(){this.fireLogicEvents=!0},Formstack.Form.prototype.launchDialog=function(n,s,o){var l=document.querySelector(".fs-form-dialog");if(l){if(n.goodies&&n.goodies.length)for(var e=0,t=n.goodies.length;e<t;e++){var i=l.querySelector(".fs-form-dialog__"+n.goodies[e]);i.className=i.className.replace(" fs-form-dialog--hidden","")}var r,a;for(r in n)if(n.hasOwnProperty(r)&&"goodies"!==r&&(a=l.querySelector(".fs-form-dialog__"+r)))if("cancel"===r||"confirm"===r){a.setAttribute("title",n[r]);var d=a.querySelector(".fs-form-dialog__button-text");d&&(d.innerHTML=n[r])}else a.innerHTML=n[r];var c=function(e){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t={};if(n.goodies&&n.goodies.length)for(var i=0,r=n.goodies.length;i<r;i++){var a=l.querySelector(".fs-form-dialog__"+n.goodies[i]);t[n.goodies[i]]=a.value}s.apply(this,[t]),o&&u()}.bind(this),u=function(e){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.closeDialog(n.goodies,u,c)}.bind(this),m=l.querySelector(".fs-form-dialog__cancel"),f=l.querySelector(".fs-form-dialog__confirm");Formstack.Util.addEvent("click",m,u),Formstack.Util.addEvent("click",f,c),l.className=l.className.replace(" fs-form-dialog--hidden","")}else{var h;if(!(h=n.goodies?prompt(n.message):confirm(n.message)))return;if(n.goodies){var p=h;(h={})[n.goodies[0]]=p}s.apply(this,[h])}},Formstack.Form.prototype.closeDialog=function(i,e,t){var r=document.querySelector(".fs-form-dialog");if(r){r.className+=" fs-ngdialog-closing",setTimeout(function(){if(r.className.match("fs-form-dialog--hidden")||(r.className+=" fs-form-dialog--hidden"),r.className=r.className.replace(" fs-ngdialog-closing",""),i&&i.length)for(var e=0,t=i.length;e<t;e++){r.querySelector(".fs-form-dialog__"+i[e]).className+=" fs-form-dialog--hidden"}},550);var a=r.querySelector(".fs-form-dialog__cancel"),n=r.querySelector(".fs-form-dialog__confirm");Formstack.Util.removeEvent("click",a,e),Formstack.Util.removeEvent("click",n,t)}},Formstack.IOS={},Formstack.IOS.getRectById=function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return"{{"+i.left+","+i.top+"}, {"+i.width+","+i.height+"}}"}return null},Formstack.IOS.base64EncodedUpload=function(e,t){var i=document.getElementById("field"+e),r=document.getElementById("field"+e+"-ios-button");return i?(r&&(r.innerHTML="Change file"),i.value=t,document.getElementById("field"+e+"Preview").src="data:image/jpeg;base64,"+t,1):0},Formstack.IOS.fileUpload=function(e){var t="ios://fileupload/"+e;window.location=t},Formstack.IOS.scanCreditCard=function(e){var t="ios://scancreditcard/"+e;window.location=t},Formstack.IOS.onCreditCard=function(e,t){var i=document.getElementById("field"+e);if(!i)return!1;i.value=t},Formstack.Android={},Formstack.Android.scanCreditCard=function(e){if(!window.formstackAndroidInterface)return!1;window.formstackAndroidInterface.onScanCreditcard(e)},Formstack.Android.onCreditCard=function(e,t){var i=document.getElementById("field"+e);if(!i)return!1;i.value=t},Formstack.Util={lcFirst:function(e){return e[0].toLowerCase()+e.slice(1)}},Formstack.Util.checkAll=function(e){var t=e.target,i=$(t),r=$('[name="field'+i.attr("fs-data-field-id")+'[]"]');r.prop("checked",t.checked),r.trigger("change")},Formstack.Util.scrollTo=function(e){var t=$(e).offset(),i=$(e).css("margin-top"),r=$(e).css("margin-left");i=Number(i.replace("px","")),r=Number(r.replace("px","")),window.scroll(t.left-r,t.top-i)},Formstack.Util.getHeight=function(e){var t=$(e).height();return isNaN(t)?0:t},Formstack.Util.getWidth=function(e){var t=$(e).width();return isNaN(t)?0:t},Formstack.Util.getStartOfCurrentDate=function(){var e=new Date;return e.setHours(0,0,0,0),e},Formstack.Util.setDate=function(e){var t=new Date,i=document.getElementById("field"+e+"Y");if(i){var r=i.options[1].value.length,a=t.getFullYear().toString();i.value=a.substring(4-r)}var n=document.getElementById("field"+e+"M");n&&(n.selectedIndex=t.getMonth()+1);var s=document.getElementById("field"+e+"D");if(s){var o=t.getDate();s.value=o<10?"0"+o:o}},Formstack.Util.setTime=function(e){var t=new Date,i=t.getHours(),r=document.getElementById("field"+e+"H");if(r){var a=i;r.options.length<=13&&12<i&&(a-=12),0==a?a=12:a<10&&(a="0"+a),r.value=a}var n=document.getElementById("field"+e+"I");if(n){var s=t.getMinutes();n.value=s<10?"0"+s:s}var o=document.getElementById("field"+e+"S");if(o){var l=t.getSeconds();o.value=l<10?"0"+l:l}var d=document.getElementById("field"+e+"A");d&&(d.selectedIndex=i<12?1:2)},Formstack.Util.formatNumber=function(e,t){for(isNaN(e.decimals)||(t=(t=parseFloat(t)).toFixed(e.decimals));/(\d+)(\d{3})/.test(t.toString());)t=t.toString().replace(/(\d+)(\d{3})/,"$1,$2");var i=null,r=null;return e.currency&&(e.currencySymbol&&(i=e.currencySymbol),e.currencyPrefix&&(i=e.currencyPrefix),e.currencySuffix&&(r=e.currencySuffix)),i&&(t=i+t),r&&(t+=r),t},Formstack.Util.monthToInt=function(e){if(isFinite(e))return parseInt(e);var t=e.substr(0,3).toLowerCase(),i=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(t);return-1<i?i+1:0},Formstack.Util.Loader=function(){this.loading={}},Formstack.Util.Loader.prototype.load=function(e,t){if(this.loading[e])this.loading[e].success.push(t);else{this.loading[e]={success:[t]};var i=document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");r.src=e;var a=!1;r.onload=r.onreadystatechange=$.proxy(function(){a||r.readyState&&"loaded"!==r.readyState&&"complete"!==r.readyState||(a=!0,r.onload=r.onreadystatechange=null,this.success(e))},this),i.insertBefore(r,i.firstChild)}},Formstack.Util.Loader.prototype.success=function(e){if(this.loading[e])if(this.loading[e].success&&this.loading[e].success.length){for(var t=this.loading[e].success,i=t.length,r=0;r<i;r++)t[r]&&"function"==typeof t[r]&&t[r]();delete this.loading[e]}else delete this.loading[e]},Formstack.Util.addEvent=function(e,t,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},Formstack.Util.removeEvent=function(e,t,i){t.addEventListener?t.removeEventListener(e,i,!1):t.attachEvent&&t.detachEvent("on"+e,i)},Formstack.Form.prototype._applyRequiredFieldValidation=function(e){for(var t=!0,i=$(e),r=i.find(".fsRequired"),a=0;a<r.length;a++){var n=r[a],s=$(n).parents(".fsMatrixFieldset"),o=void 0!==s[0],l=o&&"disabled"===$(s[0]).attr("disabled");if(n.disabled||l)break;if((t=this.checkRequired(n)&&t)||this.hasAlreadyFailedValidation(n)||this.failedContainers.push(e),!this.hasAlreadyFailedValidation(n)){var d=this.getFieldContainer(n),c=this.failedContainers.indexOf(d);-1!==c&&this.failedContainers.splice(c,1)}var u=i.attr("fs-field-type");if(o||"checkbox"===u||"radio"===u)break}return t||$(e).addClass("fsValidationError"),t},window.Formstack=Formstack,window.Formstack.Util.Loader=new Formstack.Util.Loader,String.prototype.trim||(Hs=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(Hs,"")})}(window,jQuery);