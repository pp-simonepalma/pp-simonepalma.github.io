Formstack.Analytics=function(e,s,i){var n=e+"/forms/analytics.php?f="+s;this.bottleneck=null,this.readCookie=function(e){for(var t=e+"=",s=document.cookie.split(";"),i=0;i<s.length;i++){for(var n=s[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null},this.trackView=function(){var e,t=document.createElement("script");t.type="text/javascript",t.defer=!0,this.isFirstView()?t.src=n+"&a=fv":t.src=n+"&a=v",e=window.location.href.match("formstack.com")?"hosted":document.querySelector(".fsEmbed")?"embedded":"htmlembed",t.src+="&m="+e,document.getElementsByTagName("head")[0].appendChild(t)},this.isFirstView=function(){var e="FormSpringFormView"+s,t="formstack.analytics.viewed-form."+s;try{window.sessionStorage}catch(e){return!0}return this.readCookie(e)?(window.localStorage.setItem(t,!0),!1):!window.localStorage.getItem(t)&&(window.localStorage.setItem(t,!0),!0)},this.trackView(),this.trackTouch=function(){var e=function(){if(!this.touched){this.touched=!0;var e=i.getIncompleteFields(!0),t=0<e.length?e[0].id:0,s=document.createElement("script");s.type="text/javascript",s.src=n+"&a=t&b="+t,document.getElementsByTagName("head")[0].appendChild(s)}};jQuery("input.fsField","#fsForm"+s).bind("focus",jQuery.proxy(e,this)),jQuery("textarea.fsField","#fsForm"+s).bind("focus",jQuery.proxy(e,this)),jQuery("select.fsField","#fsForm"+s).bind("focus",jQuery.proxy(e,this))},this.trackBottleneck=function(){jQuery(".fsField").bind("change",jQuery.proxy(function(e){var t;(null===this.bottleneck||i.checkRequired(this.bottleneck.field,!1,!0))&&(sessionId=window["formstack_analytics_session_"+s],sessionId&&(fields=i.getIncompleteFields(!0),0<fields.length?(this.bottleneck=fields[0],(t=document.createElement("script")).type="text/javascript",t.src=n+"&a=b&b="+this.bottleneck.id+"&s="+sessionId,document.getElementsByTagName("head")[0].appendChild(t)):(null!==this.bottleneck&&((t=document.createElement("script")).type="text/javascript",t.src=n+"&a=b&b=0&s="+sessionId,document.getElementsByTagName("head")[0].appendChild(t)),this.bottleneck=null)))},this))}};